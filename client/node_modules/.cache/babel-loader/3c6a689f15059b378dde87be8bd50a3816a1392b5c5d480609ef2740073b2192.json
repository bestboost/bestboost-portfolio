{"ast":null,"code":"var _jsxFileName = \"/Users/elenachyzyk/bestboost-portfolio/client/src/components/Certificates/PdfThumbnail.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport * as pdfjsLib from \"pdfjs-dist\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjsLib.GlobalWorkerOptions.workerSrc = \"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js\";\nconst PdfThumbnail = ({\n  url,\n  alt,\n  onClick\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const renderTaskRef = useRef(null);\n  useEffect(() => {\n    if (!url) {\n      console.error(\"URL is undefined!\");\n      return;\n    }\n    let isMounted = true; // Флаг, щоб уникнути рендеру, якщо компонент розмонтується\n\n    const loadingTask = pdfjsLib.getDocument(url);\n    loadingTask.promise.then(pdf => pdf.getPage(1)).then(page => {\n      if (!isMounted) return;\n      const viewport = page.getViewport({\n        scale: 1\n      });\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n      const context = canvas.getContext(\"2d\");\n      canvas.width = viewport.width;\n      canvas.height = viewport.height;\n      const renderContext = {\n        canvasContext: context,\n        viewport\n      };\n      const renderTask = page.render(renderContext);\n\n      // Збереження renderTask, щоб можна було скасувати його при наступному рендері\n      renderTaskRef.current = renderTask;\n      return renderTask.promise;\n    }).catch(err => console.error(\"Помилка при рендері PDF:\", err));\n    return () => {\n      isMounted = false;\n      if (renderTaskRef.current) {\n        renderTaskRef.current.cancel(); // Скасовуємо попередній рендер\n      }\n    };\n  }, [url]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    onClick: onClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n};\n_s(PdfThumbnail, \"jqa9j7J8Ww3vd8rHYPtA54p8Zu8=\");\n_c = PdfThumbnail;\nexport default PdfThumbnail;\nvar _c;\n$RefreshReg$(_c, \"PdfThumbnail\");","map":{"version":3,"names":["useEffect","useRef","pdfjsLib","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","PdfThumbnail","url","alt","onClick","_s","canvasRef","renderTaskRef","console","error","isMounted","loadingTask","getDocument","promise","then","pdf","getPage","page","viewport","getViewport","scale","canvas","current","context","getContext","width","height","renderContext","canvasContext","renderTask","render","catch","err","cancel","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/elenachyzyk/bestboost-portfolio/client/src/components/Certificates/PdfThumbnail.jsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport * as pdfjsLib from \"pdfjs-dist\";\n\npdfjsLib.GlobalWorkerOptions.workerSrc =\n  \"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js\";\n\nconst PdfThumbnail = ({ url, alt, onClick }) => {\n  const canvasRef = useRef(null);\n  const renderTaskRef = useRef(null);\n\n  useEffect(() => {\n    if (!url) {\n      console.error(\"URL is undefined!\");\n      return;\n    }\n\n    let isMounted = true; // Флаг, щоб уникнути рендеру, якщо компонент розмонтується\n\n    const loadingTask = pdfjsLib.getDocument(url);\n    loadingTask.promise\n      .then((pdf) => pdf.getPage(1))\n      .then((page) => {\n        if (!isMounted) return;\n\n        const viewport = page.getViewport({ scale: 1 });\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n\n        const context = canvas.getContext(\"2d\");\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n\n        const renderContext = { canvasContext: context, viewport };\n        const renderTask = page.render(renderContext);\n\n        // Збереження renderTask, щоб можна було скасувати його при наступному рендері\n        renderTaskRef.current = renderTask;\n\n        return renderTask.promise;\n      })\n      .catch((err) => console.error(\"Помилка при рендері PDF:\", err));\n\n    return () => {\n      isMounted = false;\n      if (renderTaskRef.current) {\n        renderTaskRef.current.cancel(); // Скасовуємо попередній рендер\n      }\n    };\n  }, [url]);\n\n  return <canvas ref={canvasRef} onClick={onClick} />;\n};\n\nexport default PdfThumbnail;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,OAAO,KAAKC,QAAQ,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvCF,QAAQ,CAACG,mBAAmB,CAACC,SAAS,GACpC,yEAAyE;AAE3E,MAAMC,YAAY,GAAGA,CAAC;EAAEC,GAAG;EAAEC,GAAG;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAC9C,MAAMC,SAAS,GAAGX,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMY,aAAa,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAElCD,SAAS,CAAC,MAAM;IACd,IAAI,CAACQ,GAAG,EAAE;MACRM,OAAO,CAACC,KAAK,CAAC,mBAAmB,CAAC;MAClC;IACF;IAEA,IAAIC,SAAS,GAAG,IAAI,CAAC,CAAC;;IAEtB,MAAMC,WAAW,GAAGf,QAAQ,CAACgB,WAAW,CAACV,GAAG,CAAC;IAC7CS,WAAW,CAACE,OAAO,CAChBC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,CAC7BF,IAAI,CAAEG,IAAI,IAAK;MACd,IAAI,CAACP,SAAS,EAAE;MAEhB,MAAMQ,QAAQ,GAAGD,IAAI,CAACE,WAAW,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC,CAAC;MAC/C,MAAMC,MAAM,GAAGf,SAAS,CAACgB,OAAO;MAChC,IAAI,CAACD,MAAM,EAAE;MAEb,MAAME,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;MACvCH,MAAM,CAACI,KAAK,GAAGP,QAAQ,CAACO,KAAK;MAC7BJ,MAAM,CAACK,MAAM,GAAGR,QAAQ,CAACQ,MAAM;MAE/B,MAAMC,aAAa,GAAG;QAAEC,aAAa,EAAEL,OAAO;QAAEL;MAAS,CAAC;MAC1D,MAAMW,UAAU,GAAGZ,IAAI,CAACa,MAAM,CAACH,aAAa,CAAC;;MAE7C;MACApB,aAAa,CAACe,OAAO,GAAGO,UAAU;MAElC,OAAOA,UAAU,CAAChB,OAAO;IAC3B,CAAC,CAAC,CACDkB,KAAK,CAAEC,GAAG,IAAKxB,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEuB,GAAG,CAAC,CAAC;IAEjE,OAAO,MAAM;MACXtB,SAAS,GAAG,KAAK;MACjB,IAAIH,aAAa,CAACe,OAAO,EAAE;QACzBf,aAAa,CAACe,OAAO,CAACW,MAAM,CAAC,CAAC,CAAC,CAAC;MAClC;IACF,CAAC;EACH,CAAC,EAAE,CAAC/B,GAAG,CAAC,CAAC;EAET,oBAAOJ,OAAA;IAAQoC,GAAG,EAAE5B,SAAU;IAACF,OAAO,EAAEA;EAAQ;IAAA+B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACrD,CAAC;AAACjC,EAAA,CA7CIJ,YAAY;AAAAsC,EAAA,GAAZtC,YAAY;AA+ClB,eAAeA,YAAY;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}